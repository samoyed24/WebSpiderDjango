{% extends "admin/base.html" %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<div id="site-name"><a href="{% url 'admin:index' %}">WebSpiderView</a></div>
{% if user.is_anonymous %}
  {% include "admin/color_theme_toggle.html" %}
{% endif %}
{% endblock %}

{% block nav-global %}
    <button id="refresh-data" class="click-button">更新数据</button>
    <style>
        .click-button {
            border-radius: 5px;
            background: slategrey;
            color: white;
        }
    </style>
    <script>
        const button = document.getElementById('refresh-data');
        button.addEventListener("click", () => {
            button.disabled = true;
            fetch("/update/", {
                "method": "POST"
                }
            )
                .then(resp => resp.json())
                .then(resp => {
                    alert('数据更新成功')

                })
        })
    </script>
{% endblock %}

